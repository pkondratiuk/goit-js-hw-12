{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n        captionDelay: 250,\n        captionPosition: \"bottom\",\n        captionsData: \"alt\",\n});\n\nexport const refs = {\n    searchForm: document.querySelector(\".js-search-form\"),\n    gallery: document.querySelector(\".js-gallery\"),\n    loader: document.querySelector(\".js-loader\"),\n    loadMoreBtn: document.querySelector(\".js-load-more-button\"),\n};\n\nexport function showLoader() {\n    refs.loader.classList.remove(\"is-hidden\");\n}\nexport function hideLoader() {\n    refs.loader.classList.add(\"is-hidden\");\n}\nexport function showButton() {\n    refs.loadMoreBtn.classList.remove(\"is-hidden\");\n}\nexport function hideButton() {\n    refs.loadMoreBtn.classList.add(\"is-hidden\");\n}\n\nexport function renderPictures(hits) {\n    return hits.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n    <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\" \n            alt=\"${tags}\" \n            width=\"360\"\n            height=\"152\" \n          />\n        </a>\n        <div class=\"discribe-box\">\n          <ul class=\"discribe-list\">\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Likes</h2>\n              <p class=\"discribe-text\">${likes}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Views</h2>\n              <p class=\"discribe-text\">${views}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Comments</h2>\n              <p class=\"discribe-text\">${comments}</p>\n            </li>\n            <li class=\"discribe-item\">\n              <h2 class=\"discribe-title\">Downloads</h2>\n              <p class=\"discribe-text\">${downloads}</p>\n            </li>\n          </ul>\n        </div>\n      </li>\n    `).join(\"\");\n}\n\nexport function scrollGalerryCard() {\n    const galleryCardHeight = document\n        .querySelector(\".gallery-card\")\n        .getBoundingClientRect().height;\n    \n    window.scrollBy({\n        top: Math.ceil(galleryCardHeight *2),\n        left: Math.ceil(galleryCardHeight *2),\n        behavior: \"smooth\",\n    });\n}\n","import axios from \"axios\";\n\nexport const searchParams = {\n    key: \"44868701-a6c2bf036a020cab1604664f3\",\n    q: \"\",\n    imageType: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page: 1,\n    per_page: 15,\n    maxPage: 0,\n};\n\nexport async function getPictures() {\n    const response = await axios.get(\"https://pixabay.com/api/\", {params: searchParams});\n        return response.data;\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { lightbox, refs, renderPictures, showLoader, hideLoader, showButton, hideButton, scrollGalerryCard } from \"./js/render-functions\";\nimport { searchParams, getPictures } from \"./js/pixabay-api\";\n\n\nhideLoader();\nhideButton();\n\nrefs.searchForm.addEventListener(\"submit\", handlerSearch);\n\nasync function handlerSearch(event) {\n    event.preventDefault();\n\n    refs.gallery.innerHTML = \"\";\n    \n    const form = event.currentTarget;\n    searchParams.q = form.elements.searchtext.value.trim();\n\n    if (!searchParams.q) {\n        noRequestError();\n        hideButton();\n        return;\n    }\n\n    showLoader();\n\n    try {\n        const { totalHits, hits } = await getPictures();\n\n        hideLoader();\n        searchParams.maxPage = Math.ceil(totalHits / searchParams.per_page);\n        refs.gallery.insertAdjacentHTML(\"beforeend\", renderPictures(hits));\n        lightbox.refresh();\n\n        if (hits.length > 0 && hits.length !== totalHits) {\n            showButton();\n            refs.loadMoreBtn.addEventListener(\"click\", handlerLoadMore);\n        } else if (hits.length === 0) {\n            noImagesError();\n        }\n    } catch (error) {\n        noImagesError;\n    } finally {\n        refs.searchForm.reset();\n    }\n}\n\nasync function handlerLoadMore() {\n    searchParams.page += 1;\n    hideButton();\n    showLoader();\n\n    try {\n        const { hits } = await getPictures(); \n\n        showButton();\n        hideLoader();\n\n        refs.gallery.insertAdjacentHTML(\"beforeend\", renderPictures(hits));\n        lightbox.refresh();\n        scrollGalerryCard();\n    } catch (error) {\n        noImagesError;\n    } finally {\n        if (searchParams.page === searchParams.maxPage) {\n            hideButton();\n            endSearchMessage();\n            refs.loadMoreBtn.removeEventListener(\"click\", handlerLoadMore);\n        }\n    }\n}\n\nfunction noImagesError() {\n    iziToast.error({\n        title: \"Error\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"center\",\n    });\n}\n\nfunction noRequestError() {\n    iziToast.warning({\n        title: \"Caution\",\n        message: \"Please write your request in the input field!\",\n        position: \"topRight\",\n    });\n}\n\nfunction endSearchMessage() {\n    iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"center\",\n    });\n}\n"],"names":["lightbox","SimpleLightbox","refs","showLoader","hideLoader","showButton","hideButton","renderPictures","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","scrollGalerryCard","galleryCardHeight","searchParams","getPictures","axios","handlerSearch","event","form","noRequestError","totalHits","handlerLoadMore","noImagesError","endSearchMessage","iziToast"],"mappings":"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"}